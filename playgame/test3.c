#include <stdio.h>
#include <stdlib.h>
#include <termio.h>
#include <unistd.h>
#include <curses.h>

#define MAP_X 28
#define MAP_Y 100
#define ITEM 20

int SCORE=0;
char map[MAP_X][MAP_Y];
char map1[MAP_X][MAP_Y] ={

   { "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111"},
   { "1000000011000000000000000000000110000000000000000000000000000000000000000000000000000000000000000001" },
   { "1000000011000000000000000000000110000000000000000000000000000000000000000000000000000000000000000001" },
   { "1000000011000000000000000000000110000000000111111111111111111111111111000000111111111111111111111111" },
   { "1000000011111111111111110000011110000000000110000000000000000000000000000000110000000000000000000001" },
   { "1000000000000000000000000000000000000000000110000000000000000000000000000000110000000000000000000001" },
   { "1000000000000000000000000000000000000000000110000000000000000000000000000000110000000000000000000001" },
   { "1000000000000000000000000000000000000000000110000000000000000000000000000000110000000000000000000001" },
   { "1000000000000000000000000000000000000000000110000000000000000000000000000000110000000000000000000001" },
   { "1000000000000000000000000000000000000000000110000000000000000000000000000000110000000000000000000001" },
   { "1000000000000000000000000000000111111110000110000000000000000000000000000000111111111111111111100001" },
   { "1000000000000000000000000000000110000000000110000000000000000000000000000000000000000000000000000001" },
   { "1000000000000000000000000000000110000000000110000000000000000000000000000000000000000000000000000001" },
   { "1000000000000000000000000000000110000000000110000000000000000000000000000000000000000000000000000001" },
   { "1111111111111111111111111111111111111111111111111111100000000000000111111111111111111111111111111111" },
   { "1000000000000000000000000000000000000000000000000001100000000000000110000000000000000000000000000001" },
   { "1000000000000000000000000000000000000000000000000001100000000000000110000000000000000000000000000001" },
   { "1000000000000000000000000000000000000000000000000001100000000000000110000000000000000000000000000001" },
   { "1000000000000000000000000000000000000000000000000001100000000000000110000000000000000000000000000001" },
   { "1000000000000000000000000000000000000000000000000001100000000000000000000000000000000000000000000001" },
   { "1000000000000001111111111111111111100000110000000001100000000000000000000000000000000000000000000001" },
   { "1000000000000001100000000000000000000000110000000001100000000000000000000000000000000000000000000001" },
   { "1000000000000001100000000000000000000000110000000001111111111000001111111111111111111111111111111111" },
   { "1000000000000001100000000000000000000000110000000000000000000000000000000000000000000000000000000001" },
   { "1000000000000001100000000000000000000000110000000000000000000000000000000000000000000000000000000001" },
   { "1000000000000001100000000000000000000000110000000000000000000000000000000000000000000000000000000001" },
   { "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111" }

};
char map2[MAP_X][MAP_Y] ={

   { "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111"},
   { "1000000001100000000001111111111111111111110000000001100000000000000000000000000000000000000000000001" },
   { "1000000001100000000001111111111111111111110000000001100000000000000000000000000000000000000000000001" },
   { "1000000001100000000000000000000000000000000000000001111111111111111111111111111111111111111111100001" },
   { "1000000001100000000000000000000000000000000000000001100000000000001100000000000000000000000001100001" },
   { "1000000001100000000000000000000000000000110000000001100000000000001100000000000000000000000001100001" },
   { "1000000001111111111111111111111111111111110000000001100001111111111100000000000000000000000001100001" },
   { "1000000000000000000000000000000000000000000000000001100001100000000000000000000000000000000001100001" },
   { "1000000000000000000000000000000000000000000000000001100001111111111111111111111111111111000001100001" },
   { "1111111111111111111111111111111111111111110000000001100000000000000000000000000000000000000001100001" },
   { "1000000000000011111111111111111100000000000000000001100000000000000000000000000000000000000001100001" },
   { "1000000000000000000000000000000000000000000000000001111111111111111111111111111111111111000001100001" },
   { "1000000000000000000000000000000000000000000000000001100000000000000000000000011000000000000001100001" },
   { "1111111111111111111111111111111111111111110000000000000000000000000000000000011000000000000000000001" },
   { "1000000000000000000000000000000000000000110000000000000000000000000000000000011000000000000000000001" },
   { "1000000000000000000000000000000000000000111111111111111111111111000000000000011000000000000000000001" },
   { "1000000000000000000000000000000000000000000000000000000000000000000000000000011000000000000000000001" },
   { "1000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111100001" },
   { "1000000000111111111111111111111111111111000000000000000000000000000000000000011000000000000000000001" },
   { "1000000000110000000000000000000000000011111111111111111111111111000000000000011000000000000000000001" },
   { "1000000000110000000000000000000000000011000000000000000000000011000000000000011000000000000000000001" },
   { "1000000000110000000000000000000000000011000000000000000000000011000001111111111111110000000000000001" },
   { "1000000000110000000000001111111000000011000000000000000000000011000001100000000000110000000000000001" },
   { "1000000000110000000000001100000000000011111111111111111110000011000001100000000000110000000000000001" },
   { "10000000001100000000000011000000000000000000000000000000000000000000000000000000000000000000000001" },
   { "1000000000110000000000001100000000000000000000000000000000000000000000000000000000000000000000000001" },
   { "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111" }

};

char map3[MAP_X][MAP_Y] ={

   { "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111"},
   { "1000001100000000000000000000000000000000000000000000110000001100001100000000000000110000000000000001" },
   { "1000001100000000000000000000000000000000000000000000110000001100001100000000000000110000000000000001" },
   { "1000001100000011111111111111111111111111111111100000110000001100001100000000000000110000000000000001" },
   { "1000001100000011000000000000110000000000000001100000110000001100001100000000000000110000000000000001" },
   { "1000001100000011000000000000110000000000000001100000110000001100001101111111110000111111111111100001" },
   { "1000001100000011000000000000110000000000000001100000110000001100000000000000110000110000000001100001" },
   { "1000001111111111100000000000110000000000000001100000110000001100000000000000110000110000000001100001" },
   { "1000000000000000000000000000110000000000000001100000110000001111111110000000110000110000000001100001" },
   { "1000000000000000000000000000110000011111111111100000110000000000000000000000110000000000000001100001" },
   { "1111111111111111110000111111110000000000000000000000000000000000000000000000110000000000000001100001" },
   { "1000000000000000000000000000000000000000000000000000000011111111111111111111110000111111111111100001" },
   { "1000000000000000000000000000000000000000000000000000000000000000000000000000000000110000000000000001" },
   { "1000000011111111111111111111111111111111111111100000000000000000000000000000000000110000000000000001" },
   { "1000000011000011000000000000000000000011000000000000000000000000001100000000000000111111111111100001" },
   { "1000000011000011000000000000000000000011000000000000000000000000001100000000001111000000000000000001" },
   { "1111100011000011000011111111111110000011000000000000111111111111111100000000001100000000000000000001" },
   { "1000000011000011000011000000000000000011000000000000000000000000001100000000001111111111110000000001" },
   { "1000000011000011000011000000000000000011000000000000000000000000001100000000000000000000000000000001" },
   { "1000000011000000000011000000000000000000000000000000000000000000001100000000000000000000000000000001" },
   { "1000000011000000000011000000000000000000000000000000000000000000001100000000000000000000111111100001" },
   { "1111111111111111111111111111111111111111111111111111111111000000001111111111111100000000110000000001" },
   { "1000000000000110000000000001100000000000000000000000000000000000001100000000001100000000110000000001" },
   { "1000001111111110000000000001111111111111111111111111111111000000001100000000001111110000111111111111" },
   { "1000000000000000000000000000000000000000000000000000000000000000001100000000000000000000000000000001" },
   { "1000000000000000000000000000000000000000000000000000000000000000001100000000000000000000000000000001" },
   { "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111" }

};
void selectmap(){

	int a=rand()%2;
	switch(a){
		case 0: map = map1;
			break;
		case 1: map = map2;
			break;
		case 2: map = map3;
			break
	}
}

char cgetch(){

        struct termios oldt,newt;
        int ch;

        tcgetattr(STDIN_FILENO,&oldt);
        newt=oldt;
        newt.c_lflag&=~(ICANON|ECHO);
        tcsetattr(STDIN_FILENO,TCSANOW,&newt);
        ch=getchar();
        tcsetattr(STDIN_FILENO,TCSANOW,&oldt);
        return ch;
}


void draw() {



   int h, w;

   char temp;



 

   for (h = 0; h < MAP_X; h++) {

      for (w = 0; w < MAP_Y; w++) {



         temp = map[h][w];

         if (temp == '0') {

            addstr(" ");

         }

         else if (temp == '1') {

 	        addstr("#");

         }

         else if (temp == '2') {

 	        addstr("X");

         }

      }

      addstr("\n");

   }

        refresh();
}
int check (int x, int y){

	if(map[x][y]=='1'){
		return 1;
	}
	return 0;
}

void getscore(int x,int y){
	if(map[x][y]=='2'){
		SCORE++;
	}
	return;
}

void makescore(){
	int i;
	int a,b;
	for(i=0;i<ITEM;i++){
	a=rand()%MAP_X;
	b=rand()%MAP_Y;
		if(map[a][b]=='0'){
			map[a][b]='2';
		}
		else i--;
	}

	return;
}



int main(void){

 int a,b,c;
 int x, y;
 x=y=5;
 selectmap();

initscr();
clear();
makescore();
draw();
 for(int i=1;i;i++){

         a=cgetch();
         b=cgetch();
         c=cgetch();
 switch(c){
	 case 67:{
		y++;
		if(check(x,y)){
			y--;
			break;
		}
		getscore(x,y);
         	move(x,y);
         	addstr("O");
         	refresh();
         	move(x,y);
        	 addstr(" ");
		 break;
        	 }
 	case 68:{
		y--;
		if(check(x,y)){
			y++;
			break;
		}
		getscore(x,y);
         	move(x,y);
                addstr("O");
                refresh();
         	move(x,y);
                addstr(" ");
		break;
                }
	 case 65:{
		x--;
		if(check(x,y)){
			x++;
			break;
		}
		getscore(x,y);
         	move(x,y);
                addstr("O");
                refresh();
         	move(x,y);
                addstr(" ");
		break;
                }
	case 66:{
		x++;
		if(check(x,y)){
			x--;
			break;
		}
		getscore(x,y);
         	move(x,y);
                addstr("O");
                refresh();
         	move(x,y);
                addstr(" ");
		break;
		 }
}
 }
 

endwin();

return 0;
}





